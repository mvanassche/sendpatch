#!/bin/bash

# Usage: makelog [-f diff-file] [svn diff options]
#
# Make a log message for a change, including the header, and the relative
# pathnames of the changed files. Output goes to stdout.
#
# If a you have a pre-existing diff file, use `-f diff-file' to use this file.

printf "\n"

{ if [ "$1" = "-f" ]
then
    cat $2
else
    svn diff -x -w --no-diff-deleted --show-copies-as-adds $* 2>&1
fi; } | sed '/^Index:/!d' | sed 's/^Index: /  * /' | sed 's/$/:/'
